<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- External -->
  <script src="//code.jquery.com/jquery-1.12.1.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.js"></script>
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>-->
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment-with-locales.min.js"></script>-->
  <!-- Local -->
  <script src="<%= pkg.name %>.min.js"></script> 
  <script src="moment-localized.min.js"></script> 
  <link rel="stylesheet" href="fonts.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h3>Chart - Day View</h3>
  <div class="chart" id="chart-day-view"></div>

  <h3>Chart - Week View</h3>
  <div class="chart" id="chart-week-view"></div>

  <h3>Chart - Month View</h3>
  <div class="chart" id="chart-month-view"></div>

  <h3>Chart - Year View</h3>
  <div class="chart" id="chart-year-view"></div>

</body>

<script type="text/javascript">
    $(document).ready(function () {
        
        var charts = daiad.charts;
        var Measurement = daiad.model.Measurement;

        console.info(daiad.VERSION);
                
        var data = null;

        //
        // Day
        //

        function getDataForDay(miny, maxy, resolution) {
            var dy = maxy - miny;
            var now = moment(), t0 = moment().startOf('day');
            var num_points = (24 / resolution);
            return $.map(new Array(num_points), function(_, i) {
                var t = t0.clone().add(i * resolution, 'hour');
                var val = miny + Math.random() * dy
                return new Measurement(i, t.toDate(), val);
            });
        }
        
        var levels = [
            {
                range: [50, 80],
                color: '#6976EB',
                description: 'Low',
            },
            {
                range: [80, 120],
                color: '#3843A5',
                description: 'Mid',
            },
            {
                range: [120, 160],
                color: '#2D3580',
                description: 'High',
            },
            {
                range: [160, 200],
                color: '#2F3565',
                description: 'Very High',
            },
        ]

        data = getDataForDay(50, 200, 1); 
        charts.meter.plotForDay($('#chart-day-view'), data, {
            resolution: 1, // hours
            levels: levels,
        });

        //
        // Week
        //

        function getDataForWeek(miny, maxy, resolution) {
            var dy = maxy - miny;
            var now = moment(), t0 = moment().startOf('isoweek');
            var num_points = Math.ceil(7 / resolution);
            return $.map(new Array(num_points), function(_, i) {
                var t = t0.clone().add(i * resolution, 'day');
                var val = miny + Math.random() * dy
                return new Measurement(i, t.toDate(), val);
            });
        }

        data = getDataForWeek(50, 200, 1);
        charts.meter.plotForWeek($('#chart-week-view'), data, {
            resolution: 1, // days
            levels: null,
        });

        //
        // Month
        //

        function getDataForMonth(miny, maxy, resolution) {
            var dy = maxy - miny;
            var now = moment(), t0 = moment().startOf('month');
            var num_points = Math.ceil(t0.daysInMonth() / resolution);
            return $.map(new Array(num_points), function(_, i) {
                var t = t0.clone().add(i * resolution, 'day');
                var val = miny + Math.random() * dy
                return new Measurement(i, t.toDate(), val);
            });
        }
        
        data = getDataForMonth(50, 200, 2);
        charts.meter.plotForMonth($('#chart-month-view'), data, {
            resolution: 2, // days
        });

        //
        // Year
        //

        function getDataForYear(miny, maxy, resolution) {
            var dy = maxy - miny;
            var now = moment(), t0 = moment().startOf('year');
            var num_points = Math.ceil(12 / resolution);
            return $.map(new Array(num_points), function(_, i) {
                var t = t0.clone().add(i * resolution, 'month');
                var val = miny + Math.random() * dy
                return new Measurement(i, t.toDate(), val);
            });
        }
        
        data = getDataForYear(50, 200, 1);
        charts.meter.plotForYear($('#chart-year-view'), data, {
            resolution: 1, // months
        });

    })
</script>

</html>
