<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module model
 */ 

var daiad = require('./index')

daiad.model || (daiad.model = {});

/**
 * @class Measurement
 */ 
function Measurement(id, timestamp, value) {
  if (!(timestamp instanceof Date)) {
    throw new Error('Expected a instance of Date as timestamp');
  }
  this.id = parseInt(id);
  this.timestamp = timestamp;
  this.value = (value == null)? null : parseFloat(value);
  return this;
}

Measurement.prototype.getValue = function(precision) {
  return this.value.toFixed(precision || 2) +
    ' (' + this.constructor.value.unit.toString() + ')';
}

var value_getter = function (m) {return m.value};

$.extend(Measurement, {
  
  //
  // Class attributes
  //

  timestamp: {
    name: 'timestamp',
    title: 'Time',
    unit: 'milliseconds'
  },
  value: {
    name: 'value',
    title: 'Value',
    unit: null
  },
  
  //
  // Class methods
  //

  // Compute the range for a series
  computeRange: function (data) 
  {
    if (!(data &amp;&amp; data.length > 0))
      return [-Infinity, +Infinity];
    var miny = Math.min.apply(null, $.map(data, value_getter)), 
      maxy = Math.max.apply(null, $.map(data, value_getter));
    return [miny, maxy];
  },

  // Compute the range [0, M] for a series of positive values
  computePositiveRange: function (data)
  {
    if (!(data &amp;&amp; data.length > 0))
      return [.0, +Infinity];
    var maxy = Math.max.apply(null, $.map(data, value_getter));
    
    if (!(maxy > 0))
      console.warn('Expected positive maximum value (' + maxy + ')');
    return [.0, maxy];
  },

  formatLabel: function()
  {
    return this.value.title + ' (' + this.value.unit + ')';
  },

});

// Set default method for getting the range of values (override in "derived" objects)
Measurement.getRange = Measurement.computePositiveRange;

function EnergyMeasurement(id, timestamp, value) {
  Measurement.call(this, id, timestamp, value);
  return this;
}

$.extend(EnergyMeasurement.prototype, Measurement.prototype, {
  // noop
});

$.extend(EnergyMeasurement, Measurement, {
  value: {
    name: 'value',
    title: 'Energy',
    unit: 'kW'
  },
});

//
// Export model
//

daiad.model = module.exports = {
  Measurement: Measurement,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-b1-charts.html">b1-charts</a></li><li><a href="module-charts.html">charts</a></li><li><a href="module-comparison-charts.html">comparison-charts</a></li><li><a href="module-meter-charts.html">meter-charts</a></li><li><a href="module-model.html">model</a></li></ul><h3>Classes</h3><ul><li><a href="module-model-Measurement.html">Measurement</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Wed Oct 05 2016 03:59:20 GMT+0300 (EEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
