/*! daiad-charts 2016-03-24 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./charts");a("./model");d.b1=function(){var a=$.extend({},d.plotOptions);a.defaults.colors=["#2D3580"],a.defaults.colormap=new Map([["default","#2D3580"],["measured-data","#2D3580"],["estimated-data","#AAAEB1"]]);var b=d.formatLabel;return{plotForEvent:function(c,e,f){if(!e||0==e.length)return null;var g=e[0].constructor,h=g.calcRange(e),i=h[0],j=h[1],k=j-i,l=e[0].timestamp.getTime(),m=e[e.length-1].timestamp.getTime(),n=m-l,o=l-Math.floor(.15*n),p=m+Math.floor(.15*n),q=[o,p];f=$.extend({bars:{},xaxis:{},yaxis:{}},f||{});var r={series:{points:{show:!1,radius:1},shadowSize:0,lines:$.extend({show:!0},a.defaults.series.lines,{fill:.4})},xaxis:$.extend({},a.defaults.xaxis,{ticks:d.generateTicks(q,f.xaxis.ticks||5,3e5,function(a){return moment(a).format("hh:mm a")}),tickLength:9,min:o,max:p}),yaxis:$.extend({},a.defaults.yaxis,{ticks:d.generateTicks(h,4,10),min:i-.15*k,max:j+.15*k}),grid:a.defaults.grid,legend:{show:!1}};return $.plot(c,[{data:$.map(e,function(a){return a.value?[[a.timestamp.getTime(),a.value]]:null}),label:b(g),color:a.defaults.colors[0]}],r)},plotForDay:function(a,b,c){},plotForWeek:function(c,e,f,g){var h=e&&e.length?e.length:0,i=f&&f.length?f.length:0;if(!(h>0||i>0))return null;var j=h>0?e[0].constructor:null,k=i>0?f[0].constructor:null,l=j.calcRange(e),m=k.calcRange(f),n=Math.min(l[0],m[0]),o=Math.max(l[1],m[1]),p=[n,o],q=o-n,r=Math.max(h,i);g=$.extend({bars:{},xaxis:{},yaxis:{}},g||{});var s=(g.resolution||1,g.bars.widthRatio||.6),t={series:{points:{show:!1},shadowSize:0,lines:{show:!1},bars:$.extend({show:!0},a.defaults.series.bars)},xaxis:$.extend({},a.defaults.xaxis,{ticks:$.map(e,function(a,b){var c=a.timestamp.getTime(),d=g.locale?moment(c).locale(g.locale):moment(c);return[[a.id+s/2,d.format("dd")]]}),min:0,max:r}),yaxis:$.extend({},a.defaults.yaxis,{ticks:d.generateTicks(p,4,10),min:n-.15*q,max:o+.15*q}),grid:a.defaults.grid,legend:{show:!1,position:"ne"},bars:$.extend({},a.defaults.bars,{barWidth:s})},u=[];if(h>0){var v=$.map(e,function(a,b){return[[b,a.value]]});u.push({data:v,label:b(j),color:a.defaults.colormap.get("measured-data")})}if(i>0)for(var w=0;i>w;)if(null!=f[w].value){for(var x=w+1,y=null;h>x&&null==e[x].value;)x++;y=x==h?i-w:x-w,u.push({data:[[w,f[w].value]],label:b(k),color:a.defaults.colormap.get("estimated-data"),bars:{barWidth:s+y-1}}),w=x}else w++;return $.plot(c,u,t)},plotForMonth:function(c,e,f){if(!e||0==e.length)return null;var g=e[0].constructor,h=g.calcRange(e),i=h[0],j=h[1],k=j-i;f=$.extend({bars:{},xaxis:{},yaxis:{}},f||{});var l=f.resolution||1,m={series:{points:$.extend({show:!0},a.defaults.series.points),shadowSize:0,lines:$.extend({show:!0},a.defaults.series.lines,{fill:.4})},xaxis:$.extend({},a.defaults.xaxis,{ticks:$.map(new Array(d.WEEKS_IN_MONTH-1),function(a,b){var c=7*(b+1)/l;return[[c,(f.weekLabel||"week")+" "+(b+1).toString()]]}),min:0,max:e.length}),yaxis:$.extend({},a.defaults.yaxis,{ticks:d.generateTicks(h,4,10),min:i-.15*k,max:j+.15*k}),grid:a.defaults.grid,legend:{show:!1}};return $.plot(c,[{data:$.map(e,function(a){return a.value?[[a.id,a.value]]:null}),label:b(g),color:a.defaults.colors[0]}],m)},plotForYear:function(c,e,f){if(!e||0==e.length)return null;var g=e[0].constructor,h=g.calcRange(e),i=h[0],j=h[1],k=j-i;f=$.extend({bars:{},xaxis:{},yaxis:{}},f||{});var l=f.resolution||1,m=moment.monthsShort(),n={series:{points:$.extend({show:!0},a.defaults.series.points),shadowSize:0,lines:$.extend({show:!0},a.defaults.series.lines,{fill:.4})},xaxis:$.extend({},a.defaults.xaxis,{ticks:$.map(e,function(a,b){return[[a.id,m[b*l]]]}),min:0,max:e.length}),yaxis:$.extend({},a.defaults.yaxis,{ticks:d.generateTicks(h,4,10),min:i-.15*k,max:j+.15*k}),grid:a.defaults.grid,legend:{show:!1}};return $.plot(c,[{data:$.map(e,function(a){return a.value?[[a.id,a.value]]:null}),label:b(g),color:a.defaults.colors[0]}],n)}}}(),b.exports=d.b1},{"./charts":2,"./model":6}],2:[function(a,b,c){var d=a("./index");d.charts||(d.charts={}),$.extend(d.charts,{WEEKS_IN_MONTH:5,plotOptions:{defaults:{series:{points:{radius:2},lines:{lineWidth:1},bars:{lineWidth:1,fill:.8}},bars:{align:"left",horizontal:!1},xaxis:{tickLength:0,tickColor:"#bbb"},yaxis:{tickLength:0,tickColor:"#bbb"},grid:{color:"#bbb",backgroundColor:null,margin:{top:15,bottom:10,left:20,right:10},borderWidth:{top:0,right:0,bottom:0,left:0}}}},formatLabel:function(a,b){var c=a.value.title+" ("+a.value.unit+")";return b&&b.description&&(c+=" ("+b.description+")"),c},filterForData:function(a){var b=a.range[0],c=a.range[1];return function(a){return null!=a.value&&a.value>=b&&a.value<c?[[a.id,a.value]]:null}},getDefaultLevel:function(a,b,c){return{range:[a,b+1],color:c}},generateTicks:function(a,b,c,d){var e=a[1]-a[0],f=Math.ceil(e/(b*c))*c,g=Math.floor(a[0]/c)*c,h=null;h=d?function(a,b){var c=g+b*f;return[[c,d.call(null,c,b,f)]]}:function(a,b){var c=g+b*f;return[[c,c.toString()]]};var i=a[1]-g<b*f?b+1:b+2;return $.map(new Array(i),h)}}),b.exports=d.charts},{"./index":3}],3:[function(a,b,c){b.exports={VERSION:"0.1dev"}},{}],4:[function(a,b,c){daiad=a("./index"),a("./model"),a("./meter-charts"),a("./b1-charts")},{"./b1-charts":1,"./index":3,"./meter-charts":5,"./model":6}],5:[function(a,b,c){var d=a("./charts");a("./model");d.meter=function(){function a(a,c){return d.getDefaultLevel(a,c,b.defaults.colors[0])}var b=$.extend({},d.plotOptions);b.defaults.colors=["#2D3580"];var c=d.formatLabel,e=d.filterForData;return{plotForDay:function(f,g,h){if(!g||0==g.length)return null;var i=g[0].constructor,j=i.calcRange(g),k=j[0],l=j[1],m=l-k;h=$.extend({bars:{},xaxis:{},yaxis:{}},h||{});var n=(h.resolution||1,h.bars.widthRatio||.6),o=h.xaxis.tickSize||4,p={series:{points:{show:!1},shadowSize:0,lines:{show:!1},bars:$.extend({show:!0},b.defaults.series.bars)},xaxis:$.extend({},b.defaults.xaxis,{ticks:$.map(g,function(a,b){var c=a.timestamp.getTime(),d=h.locale?moment(c).locale(h.locale):moment(c);return b%o==0?[[a.id+n/2,d.format("ha")]]:null}),min:0,max:g.length}),yaxis:$.extend({},b.defaults.yaxis,{ticks:d.generateTicks(j,4,10),min:k-.15*m,max:l+.15*m}),grid:b.defaults.grid,legend:{show:!1,position:"ne"},bars:$.extend({},b.defaults.bars,{barWidth:n})},q=h.levels||[a(k,l)],r=$.map(q,function(a,b){return{data:$.map(g,e(a)),label:c(i,a),color:a.color}});return $.plot(f,r,p)},plotForWeek:function(f,g,h){if(!g||0==g.length)return null;var i=g[0].constructor,j=i.calcRange(g),k=j[0],l=j[1],m=l-k;h=$.extend({bars:{},xaxis:{},yaxis:{}},h||{});var n=(h.resolution||1,h.bars.widthRatio||.6),o={series:{points:{show:!1},shadowSize:0,lines:{show:!1},bars:$.extend({show:!0},b.defaults.series.bars)},xaxis:$.extend({},b.defaults.xaxis,{ticks:$.map(g,function(a,b){var c=a.timestamp.getTime(),d=h.locale?moment(c).locale(h.locale):moment(c);return[[a.id+n/2,d.format("dd")]]}),min:0,max:g.length}),yaxis:$.extend({},b.defaults.yaxis,{ticks:d.generateTicks(j,4,10),min:k-.15*m,max:l+.15*m}),grid:b.defaults.grid,legend:{show:!1,position:"ne"},bars:$.extend({},b.defaults.bars,{barWidth:n})},p=h.levels||[a(k,l)],q=$.map(p,function(a,b){return{data:$.map(g,e(a)),label:c(i,a),color:a.color}});return $.plot(f,q,o)},plotForMonth:function(a,e,f){if(!e||0==e.length)return null;var g=e[0].constructor,h=g.calcRange(e),i=h[0],j=h[1],k=j-i;f=$.extend({bars:{},xaxis:{},yaxis:{}},f||{});var l=f.resolution||1,m={series:{points:$.extend({show:!0},b.defaults.series.points),shadowSize:0,lines:$.extend({show:!0},b.defaults.series.lines,{fill:.4})},xaxis:$.extend({},b.defaults.xaxis,{ticks:$.map(new Array(d.WEEKS_IN_MONTH-1),function(a,b){var c=7*(b+1)/l;return[[c,(f.weekLabel||"week")+" "+(b+1).toString()]]}),min:0,max:e.length}),yaxis:$.extend({},b.defaults.yaxis,{ticks:d.generateTicks(h,4,10),min:i-.15*k,max:j+.15*k}),grid:b.defaults.grid,legend:{show:!1}};return $.plot(a,[{data:$.map(e,function(a){return a.value?[[a.id,a.value]]:null}),label:c(g),color:b.defaults.colors[0]}],m)},plotForYear:function(a,e,f){if(!e||0==e.length)return null;var g=e[0].constructor,h=g.calcRange(e),i=h[0],j=h[1],k=j-i;f=$.extend({bars:{},xaxis:{},yaxis:{}},f||{});var l=f.resolution||1,m=moment.monthsShort(),n={series:{points:$.extend({show:!0},b.defaults.series.points),shadowSize:0,lines:$.extend({show:!0},b.defaults.series.lines,{fill:.4})},xaxis:$.extend({},b.defaults.xaxis,{ticks:$.map(e,function(a,b){return[[a.id,m[b*l]]]}),min:0,max:e.length}),yaxis:$.extend({},b.defaults.yaxis,{ticks:d.generateTicks(h,4,10),min:i-.15*k,max:j+.15*k}),grid:b.defaults.grid,legend:{show:!1}};return $.plot(a,[{data:$.map(e,function(a){return a.value?[[a.id,a.value]]:null}),label:c(g),color:b.defaults.colors[0]}],n)}}}(),b.exports=d.meter},{"./charts":2,"./model":6}],6:[function(a,b,c){var d=a("./index");d.model||(d.model={}),$.extend(d.model,function(){function a(a,b,c){if(!(b instanceof Date))throw new Error("Expected a instance of Date as timestamp");return this.id=parseInt(a),this.timestamp=b,this.value=null==c?null:parseFloat(c),this}function b(b,c,d){return a.call(this,b,c,d),this}return a.prototype.getValue=function(a){return this.value.toFixed(a||2)+" ("+this.constructor.value.unit.toString()+")"},$.extend(a,{timestamp:{name:"timestamp",title:"Time",unit:"milliseconds"},value:{name:"value",title:"Value",unit:null},calcRange:function(a){if(!(a&&a.length>0))return[-(1/0),+(1/0)];var b=function(a){return a.value},c=Math.min.apply(null,$.map(a,b)),d=Math.max.apply(null,$.map(a,b));return[c,d]}}),$.extend(b.prototype,a.prototype,{}),$.extend(b,a,{value:{name:"value",title:"Energy",unit:"kW"}}),{Measurement:a,EnergyMeasurement:b}}()),b.exports=d.model},{"./index":3}]},{},[4]);